#include <errno.h> 
#include <stdio.h> 
#include <stdlib.h> 
#include <sys/wait.h>

char *env_init[]={“USER=sconosciuto”, “PATH=/tmp”, NULL}; 
int main(void){
pid_t pid;
if ((pid = fork())<0){ 
perror(“Errore fork”); 
exit(-1);
} 
else if (pid == 0) {
if (execle(“/home/lagrene/bin/echoall”, “echoall”, “mioarg1”, “MIO ARG2”, (char *)0, env_init) <0){
perror(“Errore execle”); 
exit(-1);}
}
if (waitpid(pid,NULL,0) <0){ 
perror(“Errore wait”); exit(-1);}
if ((pid = fork()) <0) { 
perror(“Errore fork”); 
exit(-1);
} 
else if (pid == 0) {
if (execlp(“echoall”,”echoall”,”solo 1 arg”, (char *)0)<0){ 
perror(“errore execlp”);
exit(-1);
}
}
exit(0);
}
