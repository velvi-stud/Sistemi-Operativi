#include <stdio.h> 
#define SIZE 1024
int main(int argc,char** argv){
int pfd[2], pid;
if (pipe(pfd) == -1) {
perror("pipe() failed)"); 
exit(-1);
}
if((pid=fork()) < 0 ) {
perror("fork() failed"); 
exit(-2);
}
if(pid==0) { /* figlio */ 
close(pfd[1]);
dup2(pfd[0],0);
close(pfd[0]); 
execlp("wc","wc","-w",NULL); 
perror("wc fallita");
exit(-3);
} 
else { /* padre */ 
close(pfd[0]);
dup2(pfd[1],1);
close(pfd[1]); 
execlp("ls","ls",NULL); 
perror("ls fallita"); 
exit(-4);
}
exit(0);
}

