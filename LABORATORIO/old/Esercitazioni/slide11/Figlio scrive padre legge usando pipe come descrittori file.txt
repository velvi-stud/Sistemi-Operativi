#include <stdio.h> 
#include <sys/types.h> 
#include <sys/wait.h> 
#include <unistd.h> 
int main ()
{
int fds[2]; 
pid_t pid;
/* Crea una pipe. I descrittori per le estremità sono in fds.*/ 
pipe (fds); 
/* Crea un processo figlio. */ 
pid = fork ();
if (pid == (pid_t) 0) {
/* Processo figlio. Chiude descrittore lato scrittura */ 
close (fds[1]);
/* Connette il lato lettura della pipe allo standard input. */ 
dup2 (fds[0], STDIN_FILENO);
/* Sostituisce il processo figlio con il programma “sort”. */ 
execlp (“sort”, “sort”, 0);
}
else { /* Processo genitore */
/* Chiude il descrittore lato lettura */ 
close (fds[0]);
write(fds[1], “This is a test.\n”, 16); 
write(fds[1], “Hello, world.\n”, 14); 
write(fds[1], “My dog has fleas.\n”,18 ); 
write(fds[1], “This program is great.\n”,23); 
write(fds[1], “One fish, two fish.\n”,20);
close (fds[1]);
/* Aspetta che il processo figlio finisca */ 
waitpid (pid, NULL, 0);
}
return 0;
}
